<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.13.0">
    <title>README – ExImageInfo v0.1.0</title>
    <link rel="stylesheet" href="dist/app-9c1e3d5aa2.css" />
    
    <script src="dist/sidebar_items.js"></script>
  </head>
  <body data-type="extras">
    <script>if(localStorage.getItem('night-mode')) document.body.className += ' night-mode';</script>

<div class="main">
<button class="sidebar-toggle">
  <i class="icon-menu"></i>
</button>
<section class="sidebar">

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        ExImageInfo
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
    
  </a>

  <div class="sidebar-search">
    <i class="icon-search"></i>
    <input type="text" class="sidebar-searchInput" placeholder="search" autocomplete="off" />
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>

  <ul id="full-list" class="sidebar-fullList"></ul>
  <div class="sidebar-noResults"></div>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


<h1>README</h1>
<h1>ExImageInfo</h1>
<p>ExImageInfo is an Elixir library to parse images (binaries) and get the dimensions, detected mime-type and overall validity for a set of image formats.</p>
<h2 id="table-of-contents" class="section-heading">
  <a href="#table-of-contents" class="hover-link"><i class="icon-link"></i></a>
   Table of Contents
</h2><ol>
<li><a href="#description">Description</a>
</li>
<li><a href="#installation">Installation</a>
</li>
<li><a href="#examples">Examples</a>
</li>
<li><a href="#design-decisions">Design decisions</a>
</li>
<li><a href="#acknowledgments">Acknowledgments</a>
</li>
<li><a href="#author">Author</a>
</li>
<li><a href="#contributors">Contributors</a>
</li>
<li><a href="#changelog">ChangeLog</a>
</li>
<li><a href="#license">License</a>
</li>
</ol>
<h2 id="description" class="section-heading">
  <a href="#description" class="hover-link"><i class="icon-link"></i></a>
   Description
</h2><p>Main module that checks and gets if a binary seems to be an image (specific
format), the mime-type (and variant detected) and the dimensions of the image
(based on the type).</p>
<p>It has convention functions to guess the type of an image by trying the formats
supported by the library.</p>
<h3>Main features</h3>
<ul>
<li>Check the validity of binary by providing a specific image format*.
</li>
<li>Guess the validity of an image*.
</li>
<li>Get the mime-type and variant type by providing a specific format.
</li>
<li>Guess the mime-type and variant type of an image.
</li>
<li>Get the dimensions of an image by providing a specific format.
</li>
<li>Guess the dimensions of an image.
</li>
</ul>
<p>*Note: both cases as a general overview (partially checked).</p>
<h3>Formats</h3>
<p>Supported formats (image type to be parsed as):</p>
<ul>
<li><code class="inline">:bmp</code>
</li>
<li><code class="inline">:gif</code>
</li>
<li><code class="inline">:jpeg</code>
</li>
<li><code class="inline">:png</code>
</li>
<li><code class="inline">:psd</code>
</li>
<li><code class="inline">:tiff</code>
</li>
<li><code class="inline">:webp</code>
</li>
</ul>
<h3>Mime-types and Variants</h3>
<p>The image variant type is an invented string to identify the
type of format recognized by this library (more specific than the
mime-type).</p>
<p>Each mime-type can be linked to at least one variant type:</p>
<table>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th style="text-align: left">mime-type</th><th style="text-align: left">variant type</th><th style="text-align: left">description</th>
</tr>
</thead>
<tr>
<td style="text-align: left"><code class="inline">image/bmp</code></td><td style="text-align: left"><code class="inline">BMP</code></td><td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/gif</code></td><td style="text-align: left"><code class="inline">GIF87a</code></td><td style="text-align: left">87a gif spec</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/gif</code></td><td style="text-align: left"><code class="inline">GIF89a</code></td><td style="text-align: left">89a gif spec</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/jpeg</code></td><td style="text-align: left"><code class="inline">baseJPEG</code></td><td style="text-align: left">baseline JPEG</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/jpeg</code></td><td style="text-align: left"><code class="inline">progJPEG</code></td><td style="text-align: left">progressive JPEG</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/png</code></td><td style="text-align: left"><code class="inline">PNG</code></td><td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/psd</code></td><td style="text-align: left"><code class="inline">PSD</code></td><td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/tiff</code></td><td style="text-align: left"><code class="inline">TIFFII</code></td><td style="text-align: left">II variant</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/tiff</code></td><td style="text-align: left"><code class="inline">TIFFMM</code></td><td style="text-align: left">MM variant</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/webp</code></td><td style="text-align: left"><code class="inline">webpVP8</code></td><td style="text-align: left">lossy</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">image/webp</code></td><td style="text-align: left"><code class="inline">webpVP8L</code></td><td style="text-align: left">lossless</td>
</tr>
</table>
<p>The variant type is created just to provide a bit more of information
for every image format (if applicable).</p>
<h2 id="installation" class="section-heading">
  <a href="#installation" class="hover-link"><i class="icon-link"></i></a>
   Installation
</h2><p>Add <code class="inline">ex_image_info</code> to your list of dependencies in <code class="inline">mix.exs</code>.</p>
<p>From hex:</p>
<pre><code class="elixir">  def deps do
    [ 
      # ...
      {:ex_image_info, &quot;~&gt; 0.1.0&quot;},
    ]
  end</code></pre>
<p>Or GitHub:</p>
<pre><code class="elixir">  def deps do
    [ 
      # ...
      {:ex_image_info, github: &quot;rNoz/ex_image_info&quot;},
    ]
  end</code></pre>
<h2 id="examples" class="section-heading">
  <a href="#examples" class="hover-link"><i class="icon-link"></i></a>
   Examples
</h2><p>The following examples are run with the latest version of the library under the next environment:</p>
<pre><code class="elixir">Erlang/OTP 19 [erts-8.0.2] [source] [64-bit] [smp:8:8] [async-threads:10] [hipe] [kernel-poll:false]

Interactive Elixir (1.3.2) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)&gt; </code></pre>
<h3>Feature <code class="inline">seems?</code></h3>
<p><code class="inline">89 50 4E 47 0D 0A 1A 0A</code> are the first 8 bytes in the <code class="inline">PNG</code> signature (<code class="inline">PNG\\r\\n0x1A\\n</code>).</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.seems? &lt;&lt;0x89504E470D0A1A0A::size(64)&gt;&gt;, :png
true

iex(2)&gt; ExImageInfo.seems? &lt;&lt;0x89504E470D0A1A0A::size(64)&gt;&gt;, :webp
false</code></pre>
<p><a href="ExImageInfo.html#seems?/2"><code class="inline">ExImageInfo.seems?/2</code></a> and <a href="ExImageInfo.html#seems?/1"><code class="inline">ExImageInfo.seems?/1</code></a> does not necessarily needs a real image (as it is shown in the previous example) because it just checks the signature of every file format.</p>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.seems? File.read!(&quot;path/to/image.gif&quot;), :gif
true

iex(2)&gt; maybe_png_binary |&gt; ExImageInfo.seems? :png
false</code></pre>
<p><code class="inline">38 42 50 53</code> are the first 4 bytes in the <code class="inline">PSD</code> signature (<code class="inline">8BPS</code>).</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.seems? &lt;&lt;0x38425053::size(32)&gt;&gt;
:psd

iex(2)&gt; ExImageInfo.seems? &lt;&lt;0x384250::size(24)&gt;&gt;
nil</code></pre>
<p><a href="ExImageInfo.html#seems?/2"><code class="inline">ExImageInfo.seems?/2</code></a> and <a href="ExImageInfo.html#seems?/1"><code class="inline">ExImageInfo.seems?/1</code></a> does not necessarily needs a real image (as it is shown in the previous example) because it just checks the signature of every file format.</p>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.seems? File.read!(&quot;path/to/image.unknown&quot;)
:tiff

iex(2)&gt; webp_full_binary |&gt; ExImageInfo.seems?
:webp</code></pre>
<h3>Feature <code class="inline">type</code></h3>
<p><code class="inline">89 50 4E 47 0D 0A 1A 0A</code> are the first 8 bytes in the <code class="inline">PNG</code> signature (<code class="inline">PNG\\r\\n0x1A\\n</code>).</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.type &lt;&lt;0x89504E470D0A1A0A::size(64)&gt;&gt;, :png
nil

iex(2)&gt; ExImageInfo.type &lt;&lt;&quot;RIFF&quot;, 0::size(32), &quot;WEBPVP8L&quot;, 0::size(32), 0x2F7AC07100358683B68D::size(80)&gt;&gt;, :webp
{&quot;image/webp&quot;, &quot;webpVP8L&quot;}</code></pre>
<p>The signature part of a png it is now enough to get the type (it check also the IHDR field, just before the width and height).</p>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.type File.read!(&quot;path/to/image.gif&quot;), :gif
{&quot;image/gif&quot;, &quot;GIF87a&quot;}

iex(2)&gt; maybe_png_binary |&gt; ExImageInfo.type :png
nil</code></pre>
<p>The <em>guessed</em> version.</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.type &lt;&lt;0x38425053::size(32)&gt;&gt;
{&quot;image/psd&quot;, &quot;PSD&quot;}

iex(2)&gt; ExImageInfo.type &lt;&lt;0x384250::size(24)&gt;&gt;
nil</code></pre>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.type File.read!(&quot;path/to/image.unknown&quot;)
{&quot;image/tiff&quot;, &quot;TIFFMM&quot;}

iex(2)&gt; webp_full_binary |&gt; ExImageInfo.type
{&quot;image/webp&quot;, &quot;webpVP8&quot;}</code></pre>
<h3>Feature <code class="inline">info</code></h3>
<p><code class="inline">89 50 4E 47 0D 0A 1A 0A</code> are the first 8 bytes in the <code class="inline">PNG</code> signature (<code class="inline">PNG\\r\\n0x1A\\n</code>).</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.info &lt;&lt;0x89504E470D0A1A0A::size(64)&gt;&gt;, :png
nil

iex(2)&gt; ExImageInfo.info &lt;&lt;&quot;RIFF&quot;, 0::size(32), &quot;WEBPVP8L&quot;, 0::size(32), 0x2F7AC07100358683B68D::size(80)&gt;&gt;, :webp
{&quot;image/webp&quot;, 123, 456, &quot;webpVP8L&quot;}</code></pre>
<p>The signature part of a png it is now enough to get the type (it check also the IHDR field, just before the width and height).</p>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.info File.read!(&quot;path/to/image.gif&quot;), :gif
{&quot;image/gif&quot;, 1920, 1080, &quot;GIF87a&quot;}

iex(2)&gt; maybe_png_binary |&gt; ExImageInfo.info :png
nil</code></pre>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.info &lt;&lt;0x38425053::size(32)&gt;&gt;
nil

iex(2)&gt; ExImageInfo.info &lt;&lt;0x38425053::size(32), 0::size(80), 10::size(32), 12::size(32)&gt;&gt;
{&quot;image/psd&quot;, 12, 10, &quot;PSD&quot;}</code></pre>
<p>Usually it is used as:</p>
<pre><code class="elixir">iex(1)&gt; ExImageInfo.info File.read!(&quot;path/to/image.unknown&quot;)
{&quot;image/tiff&quot;, 128, 256, &quot;TIFFMM&quot;}

iex(2)&gt; webp_full_binary |&gt; ExImageInfo.info
{&quot;image/webp&quot;, 20, 100, &quot;webpVP8&quot;}</code></pre>
<h2 id="design-decisions" class="section-heading">
  <a href="#design-decisions" class="hover-link"><i class="icon-link"></i></a>
   Design decisions
</h2><h3>Why <code class="inline">seems?</code> and not <code class="inline">magic?</code> or <code class="inline">signature?</code>?</h3>
<p>Because for some formats it is enough with the <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)"><em>magic
number</em></a> or the
signature to get the type (image format that “starts” correctly), but in other
cases it is an algorithm a bit more complex to see if the binary seems
correct. Therefore, <em>seems</em> it is more general (than getting the <em>magic
number</em>) and it will provide a “quick overview” of the validity of the
binary.</p>
<h3>Why returning the mime-type and variant type when getting the dimensions (<code class="inline">info</code>)?</h3>
<p>Because both types (variant if applicable) are necessary to obtain the width and height
of the binary for a specific format. In case it is required both the type (and variant) and the dimensions it is not necessary to call two functions (and re-parse part or completely the binary). Therefore, to get the dimensions it is obtained the types and all the information is returned in one step.</p>
<h3>Renamed from ExImageSize to ExImageInfo</h3>
<p>Although it has been released since the very first version with the name ExImageInfo,
this library was previously known as ExImageSize, but it is preferable to have a name
less restricted. Nowadays it can get information about the type and the dimensions (size),
but in a future it could increase the amount of info to extract from an image.</p>
<h2 id="acknowledgments" class="section-heading">
  <a href="#acknowledgments" class="hover-link"><i class="icon-link"></i></a>
   Acknowledgments
</h2><p>This idea comes from libraries that I have used in other platforms and/or languages. Algorithms and some concepts are picked and based on parts of the following:</p>
<ul>
<li>image-size (JavaScript) - <em>Aditya Yadav</em>
</li>
<li>imagesize (Ruby) - <em>Keisuke Minami</em>
</li>
<li>fastimage (Ruby) - <em>Stephen Sykes</em>
</li>
</ul>
<p>Thanks to them.</p>
<h2 id="author" class="section-heading">
  <a href="#author" class="hover-link"><i class="icon-link"></i></a>
   Author
</h2><p>rNoz <a href="mailto:rnoz.commits@gmail.com">rnoz.commits@gmail.com</a>.</p>
<h2 id="contributors" class="section-heading">
  <a href="#contributors" class="hover-link"><i class="icon-link"></i></a>
   Contributors
</h2><p>See <a href="contributors.html">CONTRIBUTORS</a> for more information.</p>
<p><em>GitHub readers: <a href="CONTRIBUTORS.md">CONTRIBUTORS.md</a>.</em></p>
<h2 id="changelog" class="section-heading">
  <a href="#changelog" class="hover-link"><i class="icon-link"></i></a>
   ChangeLog
</h2><p>See <a href="changelog.html">CHANGELOG</a> for more information.</p>
<p><em>GitHub readers: <a href="CHANGELOG.md">CHANGELOG.md</a>.</em></p>
<h2 id="license" class="section-heading">
  <a href="#license" class="hover-link"><i class="icon-link"></i></a>
   License
</h2><p>ExImageInfo source code is released under the MIT License.</p>
<p>See <a href="license.html">LICENSE</a> for more information.</p>
<p><em>GitHub readers: <a href="LICENSE.md">LICENSE.md</a>.</em></p>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.13.0),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle" />
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-21f1a20b9e.js"></script>
  </body>
</html>

